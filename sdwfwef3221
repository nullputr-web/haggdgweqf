--// HORRIBLE CODE - I DONT WANNA REWRITE THIS
local UserInputService = game:GetService("UserInputService")
local Services = setmetatable({}, {
	__index = function(self, Index)
		local Value = game.GetService(game, Index)

		rawset(self, Index, Value)

		return Value
	end
})

Services.UIParent = Services.Players.LocalPlayer:WaitForChild("PlayerGui") -- Services.CoreGui  
local GuiInset = Services.GuiService:GetGuiInset()

local Theme = {
	Background_1 = Color3.fromRGB(9, 9, 9);
	Background_2 = Color3.fromRGB(2, 5, 10);
	Background_3 = Color3.fromRGB(10, 10, 12);
	Accent = Color3.fromRGB(25, 147, 212);
	White = Color3.fromRGB(255,255,255);
	Gray = Color3.fromRGB(255,255,255);
	Divider = Color3.fromRGB(12, 37, 50);
	Font_Bold = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Bold, Enum.FontStyle.Normal);
	Font_Regular = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
	SideGradient = ColorSequence.new({ColorSequenceKeypoint.new(0, Color3.new(0.0117647, 0.0823529, 0.117647)), ColorSequenceKeypoint.new(0.518, Color3.new(0.0235294, 0.0235294, 0.0235294)), ColorSequenceKeypoint.new(0.9, Color3.new(0.0235294, 0.0235294, 0.0235294)), ColorSequenceKeypoint.new(1, Color3.new(0.0235294, 0.0235294, 0.0235294))});
	SideTransparency = NumberSequence.new({NumberSequenceKeypoint.new(0, 0, 0), NumberSequenceKeypoint.new(0.1, 0.238, 0), NumberSequenceKeypoint.new(0.497, 0.631, 0), NumberSequenceKeypoint.new(0.891, 0.294, 0), NumberSequenceKeypoint.new(1, 0.131, 0)});
};

local BaseTweenInfo = TweenInfo.new(0.1, Enum.EasingStyle.Linear)
--// Utility
local function RoundNumber(Number, DecimalPlaces)
	DecimalPlaces = 10 ^ DecimalPlaces
	return math.round(Number * DecimalPlaces) / DecimalPlaces
end

local function OffsetUDim2(V2, OffsetObject)
	local OffsetPosition = OffsetObject.AbsolutePosition
	return UDim2.new(
		0, math.round(V2.X - OffsetPosition.X),
		0, math.round(V2.Y - OffsetPosition.Y)
	)
end

local function ConcatTable(Input, Seperator, Invert)
	local Size = #Input
	local Buffer = table.create(Size)

	local Start, Limit, Step

	if Invert then
		Start, Limit, Step = Size, 1, -1
	else
		Start, Limit, Step = 1, Size, 1
	end

	for Index = Start, Limit, Step do
		local Value = Input[Index]

		if Value == nil then
			continue
		end

		table.insert(Buffer, tostring(Value))
	end

	return table.concat(Buffer, Seperator), #Buffer
end

local function MapValue(Value, MinA, MaxA, MinB, MaxB, DecimalPlaces)
	return RoundNumber((1 - ((Value - MinA) / (MaxA - MinA))) * MinB + ((Value - MinA) / (MaxA - MinA)) * MaxB, DecimalPlaces)
end

local function GetIndexOfValue(Input, Value)
	for Index, _Value in pairs(Input) do
		if Value == _Value then
			return Index
		end
	end

	return 0
end

local function Create(ClassName, Properties)
	local _Instance = Instance.new(ClassName)

	for Property, Value in next, Properties do
		if Property ~= "Parent" then
			_Instance[Property] = Value
		end
	end

	_Instance.Parent = Properties["Parent"]

	return _Instance
end

local function Tween(Tweens, Play)
	local TweenTable = {}

	for Object, TweenData in next, Tweens do
		table.insert(TweenTable, Services.TweenService:Create(Object, TweenData[1], TweenData[2]))
	end

	if Play then
		for _, TweenObject in next, TweenTable do
			TweenObject:Play()
		end
	end

	return TweenTable
end

local function GetMousePosition()
	return (Services.UserInputService:GetMouseLocation() + GuiInset)
end

local function GetXInBounds(AbsolutePosition, SliderBounds)
	return math.clamp( (AbsolutePosition.X - SliderBounds.AbsolutePosition.X) , 0, SliderBounds.AbsoluteSize.X)
end

local function GetValueFromX(X, SliderBounds, Data)
	return MapValue(X, 0, SliderBounds.AbsoluteSize.X, Data.Min, Data.Max, Data.DecimalPlaces)
end

local function XToScale(X, SliderBounds)
	return X / SliderBounds.AbsoluteSize.X
end

local function SliderUpdateWrapper(SliderBounds, Label, Fill, Data, Object)
	local PreviousValue = 0/0
	return function()
		local MousePosition = GetMousePosition()
		local XInBounds = GetXInBounds(MousePosition, SliderBounds)

		local Value = RoundNumber(GetValueFromX(XInBounds, SliderBounds, Data), Data.DecimalPlaces)

		if PreviousValue ~= Value then
			PreviousValue = Value
			Object.Callback("Slider", Data.Flag, Value)
			Label.Text = Data.Format:format(Value)
		end
		Fill.Size = UDim2.new(XToScale(XInBounds, SliderBounds), 0, 1, -2)
	end
end

local function LoadItemList(Dropdown, ItemList, Callback, IsSelectable)
	local function PlayState(Tweens, State)
		for _, Tween in next, Tweens[State] do
			Tween:Play()
		end
	end

	local ButtonList = {}

	for Index, Value in ipairs(ItemList) do
		local IsSelected = (not IsSelectable and true) or (false)

		local Button = Create("TextButton", {
			FontFace = Theme.Font_Regular;
			Text = "";
			TextColor3 = Color3.new(0, 0, 0);
			TextSize = 14;
			AutoButtonColor = false;
			BackgroundColor3 = Theme.Background_2;
			Position = UDim2.new(0.112, 0, 0.02, 0);
			Size = UDim2.new(1, -10, 0, 20);
			ZIndex = 20;
			Name = "Button";
			Parent = Dropdown;
		})

		local UICorner = Create("UICorner", {
			CornerRadius = UDim.new(0, 4);
			Parent = Button;
		})

		local Label = Create("TextLabel", {
			FontFace = Theme.Font_Regular;
			RichText = true;
			Text = Value;
			TextColor3 = Color3.new(1, 1, 1);
			TextSize = 16;
			TextStrokeColor3 = Theme.Background_2;
			TextWrapped = true;
			TextXAlignment = Enum.TextXAlignment.Left;
			AnchorPoint = Vector2.new(0, 0.5);
			BackgroundColor3 = Color3.new(1, 1, 1);
			BackgroundTransparency = 1;
			Position = UDim2.new(0, 5, 0.5, 0);
			Size = UDim2.new(1, -5, 1, 0);
			ZIndex = 24;
			Name = "Label";
			Parent = Button;
		})

		local UIStroke = Create("UIStroke", {
			ApplyStrokeMode = Enum.ApplyStrokeMode.Border;
			Color = Theme.Accent;
			Parent = Button;
		})

		local Tweens = {
			Hover = Tween({
				[Label] = {BaseTweenInfo, { TextTransparency = 0.35 }};
				[UIStroke] = {BaseTweenInfo, { Transparency = 0.4 }};
			});
			Normal = Tween({
				[Label] = {BaseTweenInfo, { TextTransparency = 0.7 }};
				[UIStroke] = {BaseTweenInfo, { Transparency = 0.6 }};
			});
			Pressing = Tween({
				[Label] = {BaseTweenInfo, { TextTransparency = 0.2 }};
				[UIStroke] = {BaseTweenInfo,  { Transparency = 0.25 }};
			});
			Enabled = Tween({
				[Label] = {BaseTweenInfo, { TextTransparency = 0 }};
				[UIStroke] = {BaseTweenInfo, { Transparency = 0 }};
			});
		}

		local ButtonState, IsHovering = "Normal", false

		Button.MouseButton1Down:Connect(function()
			PlayState(Tweens, "Pressing")
		end)

		Button.MouseButton1Up:Connect(function()
			if (not IsSelectable) then
				PlayState(Tweens, "Normal")
			else
				IsSelected = not IsSelected
			end

			if IsSelected then
				ButtonState = "Enabled"
			else
				ButtonState = IsHovering and "Hover" or "Normal"
			end
			Callback(Index, Value, IsSelected)
			PlayState(Tweens, ButtonState)
		end)

		Button.MouseEnter:Connect(function()
			IsHovering = true
			ButtonState = "Hover"
			if IsSelectable and IsSelected then
				return
			end
			PlayState(Tweens, ButtonState)
		end)

		Button.MouseLeave:Connect(function()
			IsHovering = false
			ButtonState = "Normal"
			if IsSelectable and IsSelected then 
				return 
			end
			PlayState(Tweens, ButtonState)
		end)

		PlayState(Tweens, "Normal")

		ButtonList[Index] = {
			Button = Button;
			Select = function(self, SelectedValue, NoCallback)
				IsSelected = SelectedValue
				if IsSelected then
					task.spawn(PlayState, Tweens, (IsSelected and "Enabled") or "Normal")
				end
				Callback(Index, Value, IsSelected, NoCallback)
			end,
		}
	end

	return ButtonList
end

local function CreateInformationFrame(self, Object, Skeleton)
	local InformationFrame, Label
	if self.ObjectCache[Object] then
		InformationFrame = self.ObjectCache[Object]
		Label = InformationFrame.Label
	else
		InformationFrame = Create("Frame", {
			BackgroundColor3 = Theme.Background_2;
			Position = UDim2.new(0, 93, 0, 335);
			Size = UDim2.new(0, 250, 0, 0);
			ZIndex = 19;
			Name = "InformationFrame";
			BackgroundTransparency = 1;
		})

		local UIStroke = Create("UIStroke", {
			Color = Theme.Accent;
			Parent = InformationFrame;
			Transparency = 1;
		})

		local UICorner = Create("UICorner", {
			CornerRadius = UDim.new(0, 4);
			Parent = InformationFrame;
		})

		Label = Create("TextLabel", {
			FontFace = Theme.Font_Regular;
			RichText = true;
			TextColor3 = Color3.new(1, 1, 1);
			TextSize = 16;
			TextWrapped = true;
			TextXAlignment = Enum.TextXAlignment.Left;
			TextYAlignment = Enum.TextYAlignment.Top;
			BackgroundColor3 = Color3.new(1, 1, 1);
			BackgroundTransparency = 1;
			Position = UDim2.new(0, 5, 0, 5);
			Size = UDim2.new(1, -10, 1, -10);
			ZIndex = 20;
			Name = "Label";
			Parent = InformationFrame;
			TextTransparency = 1;
		})
	end

	InformationFrame.Parent = Skeleton
	self.ObjectCache[Object] = InformationFrame

	return InformationFrame, Label
end

function CreateDropdownHolder(self, Object, Skeleton)
	local Items, ItemHolder
	if self.ObjectCache[Object] then
		Items = self.ObjectCache[Object]
		ItemHolder = Items.ItemHolder
	else
		Items = Create("Frame", {
			BackgroundColor3 = Theme.Background_2;
			Position = UDim2.new(0, 0, 0, 0);
			Size = UDim2.new(0, 210, 0, 0);
			ZIndex = 5;
			BorderSizePixel = 0;
			Name = "Items";
		})

		local UIStroke = Create("UIStroke", {
			Color = Theme.Accent;
			Parent = Items;
			Transparency = 1;
		})

		local UICorner = Create("UICorner", {
			CornerRadius = UDim.new(0, 4);
			Parent = Items;
		})

		ItemHolder = Create("ScrollingFrame", {
			BottomImage = "";
			CanvasSize = UDim2.new(1, 0, 0, 0);
			ScrollBarImageColor3 = Theme.Accent;
			ScrollBarThickness = 3;
			TopImage = "";
			VerticalScrollBarInset = Enum.ScrollBarInset.Always;
			Active = true;
			BackgroundTransparency = 1;
			BorderSizePixel = 0;
			Size = UDim2.new(1, 0, 1, 0);
			ZIndex = 6;
			Name = "Holder";
			Parent = Items;
		})

		local UIListLayout = Create("UIListLayout", {
			HorizontalAlignment = Enum.HorizontalAlignment.Center;
			SortOrder = Enum.SortOrder.LayoutOrder;
			Parent = ItemHolder;
			Padding = UDim.new(0,5);
		})

		local UIPadding = Create("UIPadding", {
			PaddingTop = UDim.new(0, 5);
			Parent = ItemHolder;
		})

		Object:GetPropertyChangedSignal("AbsolutePosition"):Connect(function()
			local SkeletonPosition = Skeleton.AbsolutePosition
			local ObjectPosition = Object.AbsolutePosition
			Items.Position = UDim2.new(
				0, math.round(ObjectPosition.X - SkeletonPosition.X),
				0, math.round(ObjectPosition.Y - SkeletonPosition.Y) + GuiInset.Y
			)
		end)
	end

	Items.Parent = Skeleton
	self.ObjectCache[Object] = Items

	return Items, ItemHolder
end

local Library = {
	Util = {};
	Theme = {};
	Objects = {};
	ObjectCache = {};
	Tabs = { Skeletons = {}; ActiveTab = nil };
	Tweens = {};
	Dropdowns = {};
}

Library.__index = Library
Library.Tabs.__index = Library.Tabs

--// UIObject
local BaseObjects = {}
BaseObjects.__index = BaseObjects

--// Objects
function BaseObjects:Button(Data)
	local ButtonObject = Create("Frame", {
		AnchorPoint = Vector2.new(0, 0.5);
		BackgroundColor3 = Theme.Background_2;
		BorderSizePixel = 0;
		Position = UDim2.new(0.076, 67, 0.45, 0);
		Size = UDim2.new(0, 20, 0, 20);
		Name = "ButtonObject";
		Parent = self.Object;
		LayoutOrder = Data.LayoutOrder
	})

	local UICorner = Create("UICorner", {
		CornerRadius = UDim.new(0, 4);
		Parent = ButtonObject;
	})

	local UIStroke = Create("UIStroke", {
		Color = Theme.Accent;
		Parent = ButtonObject;
	})

	local Button = Create("ImageButton", {
		Image = "rbxassetid://10519263435";
		ScaleType = Enum.ScaleType.Fit;
		BackgroundColor3 = Color3.new(1, 1, 1);
		BackgroundTransparency = 1;
		Position = UDim2.new(0, 1, 0, 1);
		Size = UDim2.new(1, -2, 1, -2);
		Name = "Button";
		Parent = ButtonObject;
	})

	local Tweens = {
		Hover = Tween({
			[Button] = {BaseTweenInfo, { ImageTransparency = 0.35 }};
			[UIStroke] = {BaseTweenInfo, { Transparency = 0.4 }};
		});
		Normal = Tween({
			[Button] = {BaseTweenInfo, { ImageTransparency = 0.7 }};
			[UIStroke] = {BaseTweenInfo, { Transparency = 0.6 }};
		});
		Pressing = Tween({
			[Button] = {BaseTweenInfo, { ImageTransparency = 0 }};
			[UIStroke] = {BaseTweenInfo,  { Transparency = 0.25 }};
		});
	}

	local ButtonState = "Normal"

	local function PlayButtonState(State)
		State = State or ButtonState
		for _, Tween in next, Tweens[State] do
			Tween:Play()
		end
	end

	Button.MouseButton1Down:Connect(function()
		PlayButtonState("Pressing")
	end)

	Button.MouseButton1Up:Connect(function()
		self.Callback(Data.Flag)
		PlayButtonState()
	end)

	Button.MouseEnter:Connect(function()
		ButtonState = "Hover"
		PlayButtonState()
	end)

	Button.MouseLeave:Connect(function()
		ButtonState = "Normal"
		PlayButtonState()
	end)

	PlayButtonState("Normal")
end

function BaseObjects:Slider(Data)
	Data.DecimalPlaces = Data.DecimalPlaces or 0
	Data.DecimalPlaces = math.clamp(Data.DecimalPlaces, 0, 99)
	Data.Format = Data.Format or "%s"

	local SliderObject = Create("Frame", {
		AnchorPoint = Vector2.new(0, 0.5);
		BackgroundColor3 = Theme.Background_2;
		BorderSizePixel = 0;
		Position = UDim2.new(0.076, 67, 0.45, 0);
		Size = UDim2.new(0, 129, 0, 18);
		Name = "SliderObject";
		Parent = self.Object;
		LayoutOrder = Data.LayoutOrder;
	})

	local UICorner = Create("UICorner", {
		CornerRadius = UDim.new(0, 4);
		Parent = SliderObject;
	})

	local UIStroke = Create("UIStroke", {
		Color = Theme.Accent;
		Parent = SliderObject;
	})

	local Label = Create("TextLabel", {
		FontFace = Theme.Font_Regular;
		Text = "";
		TextColor3 = Color3.new(1, 1, 1);
		TextSize = 16;
		TextStrokeColor3 = Theme.Background_2;
		TextStrokeTransparency = 0;
		TextWrapped = true;
		BackgroundColor3 = Color3.new(1, 1, 1);
		BackgroundTransparency = 1;
		Size = UDim2.new(1, 0, 1, 0);
		ZIndex = 2;
		Name = "Label";
		Parent = SliderObject;
	})

	local SliderBounds = Create("Frame", {
		AnchorPoint = Vector2.new(0.5, 0);
		BackgroundColor3 = Color3.new(1, 1, 1);
		BackgroundTransparency = 1;
		BorderSizePixel = 0;
		Position = UDim2.new(0.5, 0, 0, 0);
		Size = UDim2.new(1, -2, 1, 0);
		Name = "SliderBounds";
		Parent = SliderObject;
	})

	local Fill = Create("Frame", {
		AnchorPoint = Vector2.new(0, 0.5);
		BackgroundColor3 = Theme.Accent;
		BorderSizePixel = 0;
		Position = UDim2.new(0, 0, 0.5, 0);
		Size = UDim2.new(0.5, 0, 1, -2);
		Name = "Fill";
		Parent = SliderBounds;
	})

	local UICorner = Create("UICorner", {
		CornerRadius = UDim.new(0, 4);
		Parent = Fill;
	})

	local Tweens = {
		Normal = Tween({
			[Label] = {BaseTweenInfo, { TextTransparency = 0.5 }};
			[UIStroke] = {BaseTweenInfo, { Transparency = 0.6 }};
		});
		Hover = Tween({
			[Label] = {BaseTweenInfo, { TextTransparency = 0.35 }};
			[UIStroke] = {BaseTweenInfo, { Transparency = 0.2 }};
		});
		Sliding = Tween({
			[Label] = {BaseTweenInfo, { TextTransparency = 0 }};
			[UIStroke] = {BaseTweenInfo,  { Transparency = 0 }};
		});
	}

	local function PlaySliderTween(Tween)
		for _, Tween in next, Tweens[Tween] do
			Tween:Play()
		end
	end

	local MinRoundingX = (UICorner.CornerRadius.Offset * 2) + 10
	local CurrentState = "Normal"

	local ChangedConnection, UpdateConnection, CurrentInput
	local function InputChanged(PropertyName)
		if (not CurrentInput) then
			return
		end

		local PropertyValue = CurrentInput[PropertyName]
		if PropertyName == "UserInputState" then
			if PropertyValue == Enum.UserInputState.End then
				CurrentInput = nil
				ChangedConnection:Disconnect()
				UpdateConnection:Disconnect()

				PlaySliderTween(CurrentState)
			end
		end
	end
	local Update = SliderUpdateWrapper(SliderBounds, Label, Fill, Data, self)

	SliderObject.InputBegan:Connect(function(Input)
		if Input.UserInputType == Enum.UserInputType.MouseButton1 then
			PlaySliderTween("Sliding")
			CurrentInput = Input
			ChangedConnection = Input.Changed:Connect(InputChanged)
			UpdateConnection = Services.RunService.RenderStepped:Connect(Update)
		end
	end)

	SliderObject.MouseEnter:Connect(function()
		CurrentState = "Hover"
		if (not CurrentInput) then
			PlaySliderTween(CurrentState)
		end
	end)

	SliderObject.MouseLeave:Connect(function()
		CurrentState = "Normal"
		if (not CurrentInput) then
			PlaySliderTween(CurrentState)
		end
	end)

	PlaySliderTween("Normal")

	Fill:GetPropertyChangedSignal("AbsoluteSize"):Connect(function()
		local CurrentX = Fill.AbsoluteSize.X
		if CurrentX < MinRoundingX then
			local Value = (1 - (CurrentX / MinRoundingX))
			Fill.BackgroundTransparency = Value
		else
			Fill.BackgroundTransparency = 0
		end
	end)

	Fill.Size = UDim2.new(
		XToScale(
			MapValue(Data.Default, Data.Min, Data.Max, 0, SliderBounds.AbsoluteSize.X, Data.DecimalPlaces),
			SliderBounds
		),
		0,
		1,
		-2
	)
	Label.Text = Data.Format:format(RoundNumber(Data.Default, Data.DecimalPlaces))

	if not (Data.NoStartCallback) then
		self.Callback("Slider", Data.Flag, Data.Default)
	end
end

function BaseObjects:Toggle(Data)
	local Value = Data.Default or false 

	local ToggleIndicator = Create("Frame", {
		BackgroundColor3 = Theme.Accent;
		BorderSizePixel = 0;
		Position = UDim2.new(0, 42, 0, 0);
		Size = UDim2.new(0, 20, 0, 20);
		Name = "ToggleIndicator";
		Parent = self.Object;
		LayoutOrder = Data.LayoutOrder;
	})

	local ToggleUICorner = Create("UICorner", {
		CornerRadius = UDim.new(0, 6);
		Parent = ToggleIndicator;
	})

	local Background = Create("Frame", {
		AnchorPoint = Vector2.new(0.5, 0.5);
		BackgroundColor3 = (Value and Theme.Accent) or (Theme.Background_3);
		BorderSizePixel = 0;
		Position = UDim2.new(0.5, 0, 0.5, 0);
		Size = UDim2.new(1, -4, 1, -4);
		Name = "Background";
		Parent = ToggleIndicator;
	})

	local BackgroundUICorner = Create("UICorner", {
		CornerRadius = UDim.new(0, 4);
		Parent = Background;
	})

	local UIStroke = Create("UIStroke", {
		Color = Theme.Background_2;
		Parent = Background;
	})

	local Trigger = Create("TextButton", {
		FontFace = Theme.Font_Regular;
		Text = "";
		TextColor3 = Color3.new(0, 0, 0);
		TextSize = 14;
		BackgroundTransparency = 1;
		Size = UDim2.new(1, 0, 1, 0);
		ZIndex = 3;
		Parent = ToggleIndicator;
	})

	local Tweens = {
		Hover = Tween({
			[ToggleIndicator] = {BaseTweenInfo, { Transparency = 0.4 }};
		});
		Pressing = Tween({
			[ToggleIndicator] = {BaseTweenInfo, { Transparency = 0.2 }};
		});
		[true] = Tween({
			[Background] = {BaseTweenInfo, { BackgroundColor3 = Theme.Accent, Transparency = 0 }};
			[ToggleIndicator] = {BaseTweenInfo,  { Transparency = 0 }};
		});
		[false] = Tween({
			[Background] = {BaseTweenInfo, { BackgroundColor3 = Theme.Background_3, Transparency = 1 }};
			[ToggleIndicator] = {BaseTweenInfo,  { Transparency = 0.6 }};
		});
	}


	local function PlayToggleTween(Tween)
		Tween = Tween or Value
		for _, Tween in next, Tweens[Tween] do
			Tween:Play()
		end
	end

	Trigger.MouseButton1Down:Connect(function()
		PlayToggleTween("Pressing")
	end)

	Trigger.MouseButton1Up:Connect(function()
		Value = not Value

		PlayToggleTween(Value)

		self.Callback("Toggle", Data.Flag, Value)
	end)

	Trigger.MouseEnter:Connect(function()
		PlayToggleTween("Hover")
	end)

	Trigger.MouseLeave:Connect(function()
		PlayToggleTween(Value)
	end)
	PlayToggleTween(Value)
end

function BaseObjects:Label(Data)
	local Label = Create("TextLabel", {
		FontFace = Theme.Font_Regular;
		TextColor3 = Theme.White;
		TextSize = 16;
		TextXAlignment = Enum.TextXAlignment.Left;
		AnchorPoint = Vector2.new(0, 0.5);
		BackgroundColor3 = Theme.White;
		BackgroundTransparency = 1;
		Position = UDim2.new(0.118, 0, 0.5, 0);
		Name = "Label";
		Text = Data.Text;
		Parent = self.Object;
		LayoutOrder = Data.LayoutOrder;
	})
	Label.Size = UDim2.new(0, Label.TextBounds.X, 1, 0);

	local Tweens = {
		[true] = Tween({
			[Label] = {BaseTweenInfo, { TextTransparency = 0 }};
		});
		[false] = Tween({
			[Label] = {BaseTweenInfo, { TextTransparency = 0.3 }};
		});
	}

	self.Hovering.Event:Connect(function(Value)
		for _, Tween in next, Tweens[Value] do
			Tween:Play()
		end
	end)

	for _, Tween in next, Tweens[false] do
		Tween:Play()
	end

	return Label
end

function BaseObjects:Dropdown(Data, Skeleton)
	local DropdownObject = Create("Frame", {
		AnchorPoint = Vector2.new(0, 0.5);
		BackgroundColor3 = Theme.Background_2;
		BorderSizePixel = 0;
		Position = UDim2.new(0.076, 67, 0.45, 0);
		Size = UDim2.new(0, 129, 0, 18);
		Name = "DropdownObject";
		Parent = self.Object;
		LayoutOrder = Data.LayoutOrder;
	})		

	local Trigger = Create("TextButton", {
		FontFace = Theme.Font_Regular;
		Text = "";
		TextColor3 = Color3.new(0, 0, 0);
		TextSize = 14;
		BackgroundTransparency = 1;
		Size = UDim2.new(1, 0, 1, 0);
		ZIndex = 3;
		Parent = DropdownObject;
	})

	local UICorner = Create("UICorner", {
		CornerRadius = UDim.new(0, 4);
		Parent = DropdownObject;
	})

	local UIStroke = Create("UIStroke", {
		Color = Theme.Accent;
		Parent = DropdownObject;
	})

	local Label = Create("TextLabel", {
		FontFace = Theme.Font_Regular;
		Text = "Item1";
		TextColor3 = Color3.new(1, 1, 1);
		TextSize = 16;
		TextStrokeColor3 = Theme.Background_2;
		TextStrokeTransparency = 0;
		TextXAlignment = Enum.TextXAlignment.Left;
		BackgroundTransparency = 1;
		Position = UDim2.new(0, 3, 0, 0);
		Size = UDim2.new(1, -20, 1, 0);
		ZIndex = 2;
		Name = "Label";
		Parent = DropdownObject;
		ClipsDescendants = true;
	})

	local TransparencyGradient = Create("UIGradient", {
		Enabled = false;
		Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0, 0, 0), NumberSequenceKeypoint.new(0.699999988079071, 0, 0), NumberSequenceKeypoint.new(0.9990000128746033, 0.9998999834060669, 0), NumberSequenceKeypoint.new(1, 0, 0)});
		Name = "TransparencyGradient";
		Parent = Label;
	})

	local Indicator = Create("TextLabel", {
		FontFace = Theme.Font_Regular;
		Text = "˄";
		TextColor3 = Color3.new(1, 1, 1);
		TextSize = 14;
		AnchorPoint = Vector2.new(1, 0);
		BackgroundTransparency = 1;
		Position = UDim2.new(1, 0, 0, 0);
		Size = UDim2.new(0.14, 0, 1, 0);
		Name = "Indicator";
		Parent = DropdownObject;
	})

	local UIAspectRatioConstraint = Create("UIAspectRatioConstraint", {
		AspectType = Enum.AspectType.ScaleWithParentSize;
		DominantAxis = Enum.DominantAxis.Height;
		Parent = Indicator;
	})

	local DropdownState = "Normal"

	local IndicatorSkin = {
		[true] = "˅", 
		[false] = "˄"
	}

	local Tweens = {
		Normal = Tween({
			[Label] = {BaseTweenInfo, { TextTransparency = 0.5 }};
			[UIStroke] = {BaseTweenInfo, { Transparency = 0.6 }};
		});
		Hover = Tween({
			[Label] = {BaseTweenInfo, { TextTransparency = 0.3 }};
			[UIStroke] = {BaseTweenInfo, { Transparency = 0.4 }};
		});
		Pressing = Tween({
			[Label] = {BaseTweenInfo, { TextTransparency = 0.1 }};
			[UIStroke] = {BaseTweenInfo,  { Transparency = 0.2 }};
		});
		Open = Tween({
			[Label] = {BaseTweenInfo, { TextTransparency = 0 }};
			[UIStroke] = {BaseTweenInfo,  { Transparency = 0 }};
		});
	}

	local function PlayState(State)
		State = State or DropdownState
		for _, Tween in next, Tweens[State] do
			Tween:Play()
		end
	end

	local IsOpen = false

	Label.TextTransparency = 0.4
	Label.Text = Data.Text
	TransparencyGradient.Enabled = Label.TextBounds.X > Label.AbsoluteSize.X

	local SelectedItems = {}

	local ToggleDropdown, GetDropdownY, GetDropdownX;

	local ListObject, DropdownHolder = CreateDropdownHolder(self.Library, DropdownObject, Skeleton)
	local ItemList = LoadItemList(DropdownHolder, Data.Items, function(Index, Value, Selected, NoCallback)
		if (not NoCallback) then
			self.Callback("Dropdown", Index, Value, Selected)
		end

		if Data.SelectMultiple then
			if Selected then
				SelectedItems[#SelectedItems + 1] = Value
			else
				local ValueIndex = GetIndexOfValue(SelectedItems, Value)
				table.remove(SelectedItems, ValueIndex)
			end
		else
			SelectedItems[1] = Value
		end

		local NewText, SelectedCount = ConcatTable(SelectedItems, ", ", true)

		if SelectedCount > 0 then
			Label.TextTransparency = 0 
			Label.Text = NewText
		else
			Label.TextTransparency = 0.4
			Label.Text = Data.Text
		end

		TransparencyGradient.Enabled = Label.TextBounds.X > Label.AbsoluteSize.X

		if Data.CloseAfterSelection then
			ToggleDropdown(false)
		end
	end, Data.SelectMultiple)

	ToggleDropdown = function(Forced)
		if Forced ~= nil then
			IsOpen = Forced
		else
			IsOpen = not IsOpen
		end

		local DropdownX = GetDropdownX()
		Indicator.Text = IndicatorSkin[IsOpen]

		Services.TweenService:Create(ListObject, TweenInfo.new(0.125), {
			Size = IsOpen and UDim2.new(0, DropdownX, 0, GetDropdownY()) or UDim2.new(0, DropdownX, 0, 0)
		}):Play()

		Services.TweenService:Create(ListObject.UIStroke, TweenInfo.new(0.125), {
			Transparency = IsOpen and 0 or 1
		}):Play()

		PlayState(IsOpen and "Open" or DropdownState)
	end

	GetDropdownY = function()
		local ItemCount, ItemsY, PaddingY, ListLayoutPaddingY = 0, 0, 0, 0
		for i,v in next, DropdownHolder:GetChildren() do
			if v:IsA("TextButton") then
				ItemCount += 1
				ItemsY += v.Size.Y.Offset
			elseif v:IsA("UIPadding") then
				PaddingY += v.PaddingTop.Offset + v.PaddingRight.Offset + v.PaddingLeft.Offset + v.PaddingBottom.Offset
			elseif v:IsA("UIListLayout") then
				ListLayoutPaddingY = v.Padding.Offset
			end
		end
		return (ItemsY + PaddingY) + (ItemCount * ListLayoutPaddingY)
	end

	GetDropdownX = function()
		local SizeX = DropdownObject.AbsoluteSize.X
		for i,v in next, DropdownHolder:GetChildren() do
			if v:IsA("TextButton") then
				local CurrentX = v.Label.TextBounds.X + 15
				if CurrentX > SizeX then
					SizeX = CurrentX
				end
			end
		end
		return SizeX
	end

	Trigger.MouseButton1Down:Connect(function()
		PlayState("Pressing")
	end)

	Trigger.MouseButton1Up:Connect(function()
		ToggleDropdown()
	end)

	Trigger.MouseEnter:Connect(function()
		DropdownState = "Hover"
		if IsOpen then return end
		PlayState()
	end)
	Trigger.MouseLeave:Connect(function()
		DropdownState = "Normal"
		if IsOpen then return end
		PlayState()
	end)

	ToggleDropdown(false)

	table.insert(self.Library.Dropdowns, ToggleDropdown)
	return {
		UpdateList = function(self, newItems)
			Data.Items = newItems
		end;
		Toggle = function(self, Visible)
			ToggleDropdown(Visible)
		end,
	}
end

function BaseObjects:Information(Data, Skeleton)
	local TabSkeleton = Skeleton.Parent

	local TweenInfo1 = TweenInfo.new(0.1, Enum.EasingStyle.Quad)
	local TweenInfo2 = TweenInfo.new(0.2, Enum.EasingStyle.Quad)

	local Label = Create("TextLabel", {
		FontFace = Theme.Font_Regular;
		Text = "(?)";
		TextColor3 = Color3.new(1, 1, 1);
		TextScaled = true;
		TextSize = 16;
		TextTransparency = 0.5;
		TextWrapped = true;
		TextXAlignment = Enum.TextXAlignment.Left;
		AnchorPoint = Vector2.new(0, 0.5);
		BackgroundColor3 = Color3.new(1, 1, 1);
		BackgroundTransparency = 1;
		Position = UDim2.new(0.118, 0, 0.5, 0);
		Size = UDim2.new(1, 0, 1, -2);
		Name = "Label";
		Parent = self.Object;
		LayoutOrder = Data.LayoutOrder;
	})

	local UIAspectRatioConstraint = Create("UIAspectRatioConstraint", {
		AspectType = Enum.AspectType.ScaleWithParentSize;
		DominantAxis = Enum.DominantAxis.Height;
		Parent = Label;
	})

	local InformationFrame, InformationLabel = CreateInformationFrame(self.Library, Label, TabSkeleton)

	InformationLabel.Text = Data.Text

	local Tweens = {
		Hover = Tween({
			[Label] = {TweenInfo1, { TextTransparency = 0 }};
			[InformationLabel] = {TweenInfo2, { TextTransparency = 0 }};
			[InformationFrame.UIStroke] = {TweenInfo2, { Transparency = 0 }};
			[InformationFrame] = {TweenInfo2, { BackgroundTransparency = 0 }};
		});
		Normal = Tween({
			[Label] = {TweenInfo1, { TextTransparency = 0.5 }};
			[InformationLabel] = {TweenInfo2, { TextTransparency = 1 }};
			[InformationFrame.UIStroke] = {TweenInfo2, { Transparency = 1 }};
			[InformationFrame] = {TweenInfo2, { BackgroundTransparency = 1 }};
		});
	}

	local SizeX = math.clamp(InformationLabel.TextBounds.X + 10, 0, 250)
	Label.MouseEnter:Connect(function()
		local SizeY = InformationLabel.TextBounds.Y + 10

		local Position = Label.AbsolutePosition
		local Size = Label.AbsoluteSize

		InformationFrame.Position = OffsetUDim2(Position + Vector2.new(15, 15), TabSkeleton)
		InformationFrame:TweenSize( UDim2.new(0, SizeX, 0, SizeY), Enum.EasingDirection.Out, Enum.EasingStyle.Quad, 0.15, true)
		for _, Tween in next, Tweens.Hover do
			Tween:Play()
		end
	end)

	Label.MouseLeave:Connect(function()
		InformationFrame:TweenSize(UDim2.new(0, SizeX, 0, 0), Enum.EasingDirection.In, Enum.EasingStyle.Quad, 0.15, true)
		for _, Tween in next, Tweens.Normal do
			Tween:Play()
		end
	end)
end

function BaseObjects:construct()
	local Hovering = Instance.new("BindableEvent")
	self.Hovering = Hovering

	local Object = Create("Frame", {
		BackgroundColor3 = Theme.White;
		BackgroundTransparency = 1;
		Position = UDim2.new(-0.133, 0, 0.105, 0);
		Size = UDim2.new(1, 0, 0, 20);
		Name = "Object";
		Parent = self.Groupbox.Container;
	})

	local UIListLayout = Create("UIListLayout", {
		Padding = UDim.new(0, 5);
		FillDirection = Enum.FillDirection.Horizontal;
		SortOrder = Enum.SortOrder.LayoutOrder;
		VerticalAlignment = Enum.VerticalAlignment.Center;
		Parent = Object;
	})

	Object.MouseEnter:Connect(function()
		Hovering:Fire(true)
	end)

	Object.MouseLeave:Connect(function()
		Hovering:Fire(false)
	end)

	self.Object = Object
end

function BaseObjects.new(Callback, Groupbox, Library)
	local self = setmetatable({}, BaseObjects)

	self.Callback = Callback
	self.Groupbox = Groupbox
	self.Library = Library
	self.Container = Groupbox.Container
	self:construct()

	return self
end


--// GroupBox
local GroupBox = {}
GroupBox.__index = GroupBox

function GroupBox:Resize()
	local GroupboxY = 15

	local Children = self.Container:GetChildren()
	local ChildrenCount = #Children

	GroupboxY = GroupboxY + (ChildrenCount * 20) + ((ChildrenCount - 1 ) * 5) 

	local ObjectsCanvasX = {}
	local ObjectCount = 0
	for _, ItemObject in next, Children do
		if (not ItemObject:IsA("Frame")) then
			continue
		end
		local CanvasX = 0
		for _, ObjectPart in next, ItemObject:GetChildren() do
			if ObjectPart:IsA("UIListLayout") then
				continue
			end
			ObjectCount += 1
			CanvasX = CanvasX + ObjectPart.AbsoluteSize.X
		end
		ObjectsCanvasX[#ObjectsCanvasX+1] = CanvasX
	end	

	local CanvasX = 0
	for _, X in ipairs(ObjectsCanvasX) do
		if CanvasX < X then
			CanvasX = X
		end
	end

	CanvasX = CanvasX + ((ObjectCount - 1) * 5)

	self.Main.Size = UDim2.new(1, -7, 0, GroupboxY)
	self.Container.CanvasSize = UDim2.new(0, CanvasX, 0, 0)
end

function GroupBox:CreateObject(ObjectCallback, ObjectList)
	ObjectCallback = (ObjectCallback or print)

	local BaseObject = BaseObjects.new(ObjectCallback, self, self.Library)

	for Index, ObjectData in ipairs(ObjectList) do
		if (not ObjectData["LayoutOrder"]) then
			ObjectData["LayoutOrder"] = Index
		end

		BaseObject[ObjectData.Type](BaseObject, ObjectData, self.Skeleton)
	end

	self:Resize()

	return BaseObject
end

function GroupBox:construct()
	local Tweens = {
		Hover = Tween({
			[self.Label] = {BaseTweenInfo, { TextTransparency = 0 }};
			[self.Stroke] = {BaseTweenInfo, { Transparency = 0.4 }};
		});
		Normal = Tween({
			[self.Label] = {BaseTweenInfo, { TextTransparency = 0.3 }};
			[self.Stroke] = {BaseTweenInfo, { Transparency = 0.9 }};
		});
	}

	local ScrollBarTweens = {
		Open = Services.TweenService:Create(self.Container, BaseTweenInfo, {
			ScrollBarThickness = 4
		}),
		Closed = Services.TweenService:Create(self.Container, BaseTweenInfo, {
			ScrollBarThickness = 1
		})
	}

	local LastChange = tick()

	self.Tab.Container:GetPropertyChangedSignal("AbsoluteSize"):Connect(function()
		LastChange = tick()
	end)

	Services.RunService.RenderStepped:Connect(function()
		local LastChangeDelta = tick() - LastChange
		self.Container.ScrollBarImageTransparency = (LastChangeDelta > 0.5 and 0) or 1
	end)

	self.ScrollBarArea.MouseEnter:Connect(function()
		ScrollBarTweens.Open:Play()
	end)

	self.ScrollBarArea.MouseLeave:Connect(function()
		ScrollBarTweens.Closed:Play()
	end)


	self.Main.MouseEnter:Connect(function()
		for _, Tween in next, Tweens.Hover do
			Tween:Play()
		end
	end)

	self.Main.MouseLeave:Connect(function()
		for _, Tween in next, Tweens.Normal do
			Tween:Play()
		end
	end)

	for _, Tween in next, Tweens.Normal do
		Tween:Play()
	end
end

function GroupBox.new(Objects)
	local self = setmetatable({}, GroupBox)

	self.Main = Objects.Main
	self.Container = Objects.Container
	self.Stroke = Objects.Stroke
	self.Label = Objects.Label
	self.Tab = Objects.Tab
	self.Skeleton = Objects.Skeleton
	self.Library = Objects.Library
	self.ScrollBarArea = Objects.ScrollBarArea

	self:construct()

	return self
end


--// Tabs
function Library.Tabs:__CreateTab()
	local TabContainer = Create("ScrollingFrame", {
		ScrollBarImageColor3 = Color3.new(0, 0, 0);
		ScrollBarThickness = 0;
		AnchorPoint = Vector2.new(0.5, 0.5);
		BackgroundTransparency = 1;
		Position = UDim2.new(0.5, 0, 0.5, 0);
		Size = UDim2.new(1, -20, 1, -20);
		Name = "Container";
		Parent = self.Parent.Main;
	})

	local TabSkeleton = Create("Frame", {
		BackgroundColor3 = Color3.new(1, 1, 1);
		BackgroundTransparency = 1;
		ZIndex = 10;
		Name = "TabSkeleton";
		Parent = self.Parent.Frames;
		ClipsDescendants = true,
	})

	--// Left Container
	local LContainer = Create("Frame", {
		BackgroundTransparency = 1;
		BorderSizePixel = 0;
		Size = UDim2.new(0.5, 0, 1, 0);
		Name = "LContainer";
		Parent = TabContainer;
	})

	local LSkeleton = Create("Frame", {
		BackgroundColor3 = Color3.new(1, 1, 1);
		BackgroundTransparency = 1;
		ZIndex = 10;
		Name = "LSkeleton";
		Parent = TabSkeleton;
		ClipsDescendants = true,
	})

	local LLayout = Create("UIListLayout", {
		Padding = UDim.new(0, 10);
		HorizontalAlignment = Enum.HorizontalAlignment.Center;
		SortOrder = Enum.SortOrder.LayoutOrder;
		Parent = LContainer;
	})

	local LPadding = Create("UIPadding", {
		PaddingTop = UDim.new(0, 1);
		Parent = LContainer;
	})

	--// Right Container
	local RContainer = Create("Frame", {
		AnchorPoint = Vector2.new(1, 0);
		BackgroundTransparency = 1;
		BorderSizePixel = 0;
		Position = UDim2.new(1, 0, 0, 0);
		Size = UDim2.new(0.5, 0, 1, 0);
		Name = "RContainer";
		Parent = TabContainer;
	})

	local RSkeleton = Create("Frame", {
		BackgroundColor3 = Color3.new(1, 1, 1);
		BackgroundTransparency = 1;
		ZIndex = 10;
		Name = "RSkeleton";
		Parent = TabSkeleton;
		ClipsDescendants = true,
	})

	local RLayout = Create("UIListLayout", {
		Padding = UDim.new(0, 10);
		HorizontalAlignment = Enum.HorizontalAlignment.Center;
		SortOrder = Enum.SortOrder.LayoutOrder;
		Parent = RContainer;
	})

	local RPadding = Create("UIPadding", {
		PaddingTop = UDim.new(0, 1);
		Parent = RContainer;
	})

	--// Tab Button
	local Button = Create("TextButton", {
		FontFace = Theme.Font_Regular;
		Text = "";
		TextColor3 = Color3.new(0, 0, 0);
		TextSize = 14;
		AutoButtonColor = false;
		BackgroundColor3 = Theme.Background_2;
		Position = UDim2.new(0.178, 0, 0, 0);
		Size = UDim2.new(1, -20, 0, 25);
		Name = "Button";
		Parent = self.Parent.Side.Container;
	})

	local UIStroke = Create("UIStroke", {
		ApplyStrokeMode = Enum.ApplyStrokeMode.Border;
		Color = Theme.Accent;
		Parent = Button;
	})

	local UICorner = Create("UICorner", {
		CornerRadius = UDim.new(0, 4);
		Parent = Button;
	})

	local IconContainer = Create("Frame", {
		BackgroundTransparency = 1;
		Size = UDim2.new(1, 0, 1, 0);
		Name = "IconContainer";
		Parent = Button;
	})

	local UIAspectRatioConstraint = Create("UIAspectRatioConstraint", {
		AspectType = Enum.AspectType.ScaleWithParentSize;
		DominantAxis = Enum.DominantAxis.Height;
		Parent = IconContainer;
	})

	local Icon = Create("ImageLabel", {
		Image = self.Data.Icon or "rbxassetid://10403490626";
		AnchorPoint = Vector2.new(0.5, 0.5);
		BackgroundTransparency = 1;
		Position = UDim2.new(0.5, 0, 0.5, 0);
		Size = UDim2.new(1, -4, 1, -4);
		Name = "Icon";
		Parent = IconContainer;
	})

	local Label = Create("TextLabel", {
		FontFace = Theme.Font_Regular;
		RichText = true;
		Text = self.Data.Title;
		TextColor3 = Theme.White;
		TextSize = 16;
		TextWrapped = true;
		TextXAlignment = Enum.TextXAlignment.Left;
		AnchorPoint = Vector2.new(0, 0.5);
		BackgroundTransparency = 1;
		Position = UDim2.new(0, 27, 0.5, 0);
		Size = UDim2.new(1, -27, 1, 0);
		Name = "Label";
		Parent = Button;
	})

	self.TabButton = Button;
	self.TabIcon = Icon;
	self.TabTitle = Label;
	self.Stroke = UIStroke;
	self.RContainer = RContainer;
	self.LContainer = LContainer;
	self.RSkeleton = RSkeleton;
	self.LSkeleton = LSkeleton;
	self.Skeleton = TabSkeleton;
	self.Container = TabContainer;
end

function Library.Tabs:SetVisible(Value)
	if Value then
		if (self.Visible) then return end

		if Library.Tabs.ActiveTab then
			Library.Tabs.ActiveTab:SetVisible(false)
		end

		self.Visible = Value
		self.Container.Visible = Value

		Library.Tabs.ActiveTab = self

		self:PlayButtonState("Enabled")

		self.Container.Position = UDim2.new(0, 10, 0.5, 0)
		self.Tweens.ShowContainer:Play()
	else
		self.Container.Position = UDim2.new(0.5, 0, 0.5, 0)

		self.ButtonState = "Normal"
		self:PlayButtonState("Normal")

		self.Tweens.HideContainer:Play()

		self.Container.Visible = false
		self.Visible = false
	end
end

function Library.Tabs:Groupbox(GroupboxData)
	local ContainerSkeleton = GroupboxData.Side == 1 and self.LSkeleton or self.RSkeleton
	local Groupbox = Create("Frame", {
		BackgroundColor3 = Theme.Background_3;
		BorderSizePixel = 0;
		Position = UDim2.new(0, 23, 0, 16);
		Size = UDim2.new(1, -7, 0, 35);
		Name = "Groupbox";
		ClipsDescendants = true,
		Parent = (GroupboxData.Side == 1 and self.LContainer) or self.RContainer;
	})

	local ScrollBarArea = Create("Frame", {
		AnchorPoint = Vector2.new(0, 1);
		BackgroundColor3 = Color3.new(1, 1, 1);
		BackgroundTransparency = 1;
		BorderSizePixel = 0;
		Position = UDim2.new(0, 0, 1, 0);
		Size = UDim2.new(1, 0, 0, 20);
		Name = "ScrollBarArea";
		Parent = Groupbox;
	})

	local UICorner = Create("UICorner", {
		Parent = Groupbox;
	})

	local UIStroke = Create("UIStroke", {
		Color = Theme.Accent;
		Transparency = 0.9;
		Parent = Groupbox;
	})

	local Label = Create("TextLabel", {
		FontFace = Theme.Font_Regular;
		Text = GroupboxData.Title;
		TextColor3 = Theme.White;
		TextSize = 18;
		TextXAlignment = Enum.TextXAlignment.Left;
		BackgroundTransparency = 1;
		Position = UDim2.new(0, 7, 0, 7);
		Size = UDim2.new(1, -7, 0, 10);
		Parent = Groupbox;
	})

	local ItemHolder = Create("ScrollingFrame", {
		BottomImage = "";
		TopImage = "";
		CanvasSize = UDim2.new(0, 0, 0, 0);
		ScrollBarImageColor3 = Theme.Accent;
		ScrollBarThickness = 3;
		VerticalScrollBarInset = Enum.ScrollBarInset.Always;
		AnchorPoint = Vector2.new(0.5, 0);
		BackgroundTransparency = 1;
		BorderSizePixel = 0;
		ClipsDescendants = false;
		Position = UDim2.new(0.5, 0, 0, 25);
		Size = UDim2.new(1, -20, 1, -35);
		Name = "ItemHolder";
		Parent = Groupbox;
	})

	local UIListLayout = Create("UIListLayout", {
		Padding = UDim.new(0, 5);
		HorizontalAlignment = Enum.HorizontalAlignment.Center;
		SortOrder = Enum.SortOrder.LayoutOrder;
		Parent = ItemHolder;
	})

	return GroupBox.new({
		Main = Groupbox,
		Container = ItemHolder,
		Stroke = UIStroke,
		Label = Label,
		Tab = self,
		Skeleton = ContainerSkeleton,
		Library = self.Parent,
		ScrollBarArea = ScrollBarArea,
	})
end

function Library.Tabs:construct(Data)
	self.ButtonState = "Normal"
	self.Data = Data

	self:__CreateTab()

	self.Tweens = {
		HideContainer = Services.TweenService:Create(self.Container, TweenInfo.new(0.25, Enum.EasingStyle.Quad), {
			Size = UDim2.new(0,0,1,-20),
			Position = UDim2.new(1,-10,0.5,0)
		});
		ShowContainer = Services.TweenService:Create(self.Container, TweenInfo.new(0.25, Enum.EasingStyle.Quad), { 
			Size = UDim2.new(1,-20,1,-20),
			Position = UDim2.new(0.5,0,0.5,0)
		});
		Button = {
			Hover = Tween({
				[self.Stroke] = {BaseTweenInfo, { Transparency = 0.4 }};
				[self.TabIcon] = {BaseTweenInfo, { ImageTransparency = 0.35 }};
				[self.TabTitle] = {BaseTweenInfo, { TextTransparency = 0.35 }};
			});
			Normal = Tween({
				[self.Stroke] = {BaseTweenInfo, { Transparency = 0.6 }};
				[self.TabIcon] = {BaseTweenInfo, { ImageTransparency = 0.5 }};
				[self.TabTitle] = {BaseTweenInfo, { TextTransparency = 0.5 }};
			});
			Pressing = Tween({
				[self.Stroke] = {BaseTweenInfo, { Transparency = 0.25 }};
				[self.TabIcon] = {BaseTweenInfo, { ImageTransparency = 0 }};
				[self.TabTitle] = {BaseTweenInfo, { TextTransparency = 0 }};
			});
			Enabled = Tween({
				[self.Stroke] = {BaseTweenInfo, { Transparency = 0 }};
				[self.TabIcon] = {BaseTweenInfo, { ImageTransparency = 0 }};
				[self.TabTitle] = {BaseTweenInfo, { TextTransparency = 0 }};
			});
		};
	}

	function self:PlayButtonState(State)
		State = State or self.ButtonState
		for _, Tween in next, self.Tweens.Button[State] do
			Tween:Play()
		end
	end

	--// Tab Button
	self.TabButton.MouseButton1Down:Connect(function()
		if self.Visible then
			return
		end

		self:PlayButtonState("Pressing")
	end)

	self.TabButton.MouseButton1Up:Connect(function()
		if self.Visible then
			return
		end

		self:PlayButtonState("Enabled")
		self:SetVisible(true)
	end)

	self.TabButton.MouseEnter:Connect(function()
		if self.Visible then
			return
		end

		self.ButtonState = "Hover"
		self:PlayButtonState()
	end)

	self.TabButton.MouseLeave:Connect(function()
		if self.Visible then
			return
		end

		self.ButtonState = "Normal"
		self:PlayButtonState()
	end)

	--// Update TabSkeleton
	local function UpdateContainerSkeleton(ParentPos)
		local SizeR = self.RContainer.AbsoluteSize
		local PositionR = self.RContainer.AbsolutePosition - ParentPos
		self.RSkeleton.Size = UDim2.new(0, SizeR.X, 0, SizeR.Y)
		self.RSkeleton.Position = UDim2.new(0, PositionR.X, 0, PositionR.Y)

		local SizeL = self.LContainer.AbsoluteSize
		local PositionL = self.LContainer.AbsolutePosition - ParentPos
		self.LSkeleton.Size = UDim2.new(0, SizeL.X, 0, SizeL.Y)
		self.LSkeleton.Position = UDim2.new(0, PositionL.X, 0, PositionL.Y)
	end

	local function UpdateTabSkeleton()
		local AbsoluteSize, AbsolutePosition = self.Container.AbsoluteSize, self.Container.AbsolutePosition
		self.Skeleton.Size = UDim2.new(0, AbsoluteSize.X, 0, AbsoluteSize.Y)
		self.Skeleton.Position = UDim2.new(0, AbsolutePosition.X, 0, AbsolutePosition.Y)

		UpdateContainerSkeleton(AbsolutePosition)
	end

	self.Container:GetPropertyChangedSignal("AbsolutePosition"):Connect(UpdateTabSkeleton)
	self.Container:GetPropertyChangedSignal("AbsoluteSize"):Connect(UpdateTabSkeleton)
end

function Library.Tabs.new(TabData)
	local self = setmetatable({
		Visible = false
	}, Library.Tabs)

	self:construct(TabData)

	if (not Library.Tabs.ActiveTab) then
		Library.Tabs.ActiveTab = self
		self:SetVisible(true)
	else
		self:SetVisible(false)
	end

	return self
end

--// Library Methods
function Library:__CreateMainUI()
	local AlaskaUI = Create("ScreenGui", {
		Name = "AlaskaUI";
		Parent = self.UIParent or Services.UIParent;
	})

	local Frames = Create("Frame", {
		BackgroundColor3 = Color3.new(1, 1, 1);
		BackgroundTransparency = 1;
		Size = UDim2.new(1, 0, 1, 0);
		Name = "Frames";
		Parent = AlaskaUI;
	})

    local UiContainer = Create("Frame", {
        BackgroundTransparency = 1;
        BorderSizePixel = 0;
        Position = UDim2.new(0.175, 0, 0.186, 0);
        Size = UDim2.new(0, 790, 0, 710);  -- Increased size for both width and height
        Name = "Container";
        Parent = AlaskaUI;
        Draggable = true;
        Active = true;
    })

	local OuterStroke = Create("UIStroke", {
		Color = Theme.Accent;
		Transparency = 0.8;
		Parent = UiContainer;
	})

	local Top = Create("Frame", {
		AnchorPoint = Vector2.new(1, 0);
		BackgroundColor3 = Theme.Background_1;
		BorderSizePixel = 0;
		Position = UDim2.new(1, 0, 0, 0);
		Size = UDim2.new(0.714, 0, 0.106, 0);
		ZIndex = 0;
		Name = "Top";
		Parent = UiContainer;
	})

	local Divider = Create("Frame", {
		AnchorPoint = Vector2.new(0.5, 1);
		BackgroundColor3 = Theme.Divider;
		BorderSizePixel = 0;
		Position = UDim2.new(0.5, 0, 1, 0);
		Size = UDim2.new(1, -10, 0, 1);
		Name = "Divider";
		Parent = Top;
	})

	local TopContainer = Create("Frame", {
		AnchorPoint = Vector2.new(1, 0.5);
		BackgroundTransparency = 1;
		Position = UDim2.new(1, -15, 0.5, 0);
		Size = UDim2.new(0.5, 0, 1, -29);
		Name = "Container";
		Parent = Top;
	})

	local UIListLayout = Create("UIListLayout", {
		Padding = UDim.new(0, 10);
		FillDirection = Enum.FillDirection.Horizontal;
		HorizontalAlignment = Enum.HorizontalAlignment.Right;
		SortOrder = Enum.SortOrder.LayoutOrder;
		Parent = TopContainer;
	})

	local Side = Create("Frame", {
		BorderSizePixel = 0;
		Size = UDim2.new(0.287, 0, 1, 0);
		Name = "Side";
		Parent = UiContainer;
	})

	local Background = Create("Frame", {
		AnchorPoint = Vector2.new(0.5, 0.5);
		BackgroundColor3 = Theme.Background_1;
		BorderSizePixel = 0;
		Position = UDim2.new(0.5, 0, 0.5, 0);
		Size = UDim2.new(1, 0, 1, 0);
		ZIndex = -5;
		Name = "Background";
		Parent = Side;
	})

	local SideContainer = Create("ScrollingFrame", {
		ScrollBarImageColor3 = Color3.new(0, 0, 0);
		ScrollBarThickness = 0;
		Active = true;
		AnchorPoint = Vector2.new(0, 1);
		BackgroundTransparency = 1;
		Position = UDim2.new(0, 0, 1, 0);
		Size = UDim2.new(1, 0, 0.894, -8);
		ZIndex = 2;
		Name = "Container";
		Parent = Side;
	})

	local SideListLayout = Create("UIListLayout", {
		Padding = UDim.new(0, 10);
		HorizontalAlignment = Enum.HorizontalAlignment.Center;
		SortOrder = Enum.SortOrder.LayoutOrder;
		Parent = SideContainer;
	})

	local SideUIPadding = Create("UIPadding", {
		PaddingTop = UDim.new(0, 5);
		Parent = SideContainer;
	})

	local SideTop = Create("Frame", {
		BackgroundTransparency = 1;
		BackgroundColor3 = Theme.Background_1;
		Size = UDim2.new(1, 0, 0.106, 0);
		Name = "Top";
		BorderSizePixel = 0;
		Parent = Side;
	})

	local SideDivider = Create("Frame", {
		AnchorPoint = Vector2.new(0.5, 1);
		BackgroundColor3 = Theme.Divider;
		BorderSizePixel = 0;
		Position = UDim2.new(0.5, 0, 1, 0);
		Size = UDim2.new(1, -10, 0, 1);
		Name = "Divider";
		Parent = SideTop;
	})

	local IconContainer = Create("Frame", {
		BackgroundTransparency = 1;
		Size = UDim2.new(1, 0, 1, 0);
		Name = "IconContainer";
		Parent = SideTop;
	})

	local Icon = Create("ImageLabel", {
		Image = self.Data.Icon or "rbxassetid://10403490626";
		AnchorPoint = Vector2.new(0.5, 0.5);
		BackgroundTransparency = 1;
		Position = UDim2.new(0.5, 0, 0.5, 0);
		Size = UDim2.new(1, -10, 1, -10);
		Name = "Icon";
		Parent = IconContainer;
	})

	local Label = Create("TextLabel", {
		Text = self.Data.Title;
		FontFace = Theme.Font_Bold;
		RichText = true;
		TextColor3 = Theme.White;
		TextScaled = true;
		TextSize = 18;
		TextWrapped = true;
		TextXAlignment = Enum.TextXAlignment.Left;
		AnchorPoint = Vector2.new(0, 0.5);
		BackgroundTransparency = 1;
		Position = UDim2.new(1, 0, 0.5, 0);
		Size = UDim2.new(0, 120, 0.401, 0);
		Name = "Label";
		Parent = Icon;
	})

	local UIAspectRatioConstraint = Create("UIAspectRatioConstraint", {
		AspectType = Enum.AspectType.ScaleWithParentSize;
		DominantAxis = Enum.DominantAxis.Height;
		Parent = IconContainer;
	})

	local UIGradient = Create("UIGradient", {
		Color = Theme.SideGradient;
		Offset = Vector2.new(-1.2, 0);
		Rotation = -45;
		Transparency = Theme.SideTransparency,
		Parent = Side;
	})

	local Main = Create("Frame", {
		AnchorPoint = Vector2.new(1, 1);
		BackgroundColor3 = Theme.Background_1;
		BorderSizePixel = 0;
		Position = UDim2.new(1, 0, 1, 0);
		Size = UDim2.new(0.714, 0, 0.894, 0);
		Name = "Main";
		ClipsDescendants = true;
		Parent = UiContainer;
	})

	self.Main = Main
	self.Side = Side
	self.Top = Top
	self.Frames = Frames
	self.UiContainer = UiContainer
	self.Background = Background
	self.Label = Label
	self.SideDivider = SideDivider
	self.SideContainer = SideContainer
	self.Divider = Divider
	self.Icon = Icon
	self.Stroke = OuterStroke
	self.AlaskaUI = AlaskaUI 
end

function Library.new(Data)
	local self = setmetatable({}, Library)

	self.UIParent = Data.Parent
	self.Util.Parent = self
	self.Tabs.Parent = self

	self.Data = Data

	self:__CreateMainUI()

	local Tweens = {
		Hover = Tween({
			[self.Label] = {BaseTweenInfo, { TextTransparency = 0 }};
			[self.Background] = {BaseTweenInfo, { Transparency = 0 }};
			[self.Stroke] = {BaseTweenInfo, { Transparency = 0.4 }};
		});
		Normal = Tween({
			[self.Label] = {BaseTweenInfo, { TextTransparency = 0.5 }};
			[self.Background] = {BaseTweenInfo, { Transparency = 1 }};
			[self.Stroke] = {BaseTweenInfo, { Transparency = 0.8 }};
		});
		HideUI = Tween({
			[self.Top] = { BaseTweenInfo, { BackgroundTransparency = 1 } };
			[self.Main] = { BaseTweenInfo, { BackgroundTransparency = 1 } };
			[self.SideDivider] = { BaseTweenInfo, { BackgroundTransparency = 1 } };
			[self.Divider] = { BaseTweenInfo, { BackgroundTransparency = 1 } };
			[self.SideContainer] = { BaseTweenInfo, { Size = UDim2.new(1,0,0,0) } };
			[self.Background] = {BaseTweenInfo, { Transparency = 1 }};
			[self.Label] = {BaseTweenInfo, { TextTransparency = 1 }};
			[self.Icon] = {BaseTweenInfo, { ImageTransparency = 1 }};
			[self.Side] = {BaseTweenInfo, { BackgroundTransparency = 1 }};
			[self.Stroke] = {BaseTweenInfo, { Transparency = 1 }};
		});
		ShowUI = Tween({
			[self.Top] = { BaseTweenInfo, { BackgroundTransparency = 0 } };
			[self.Main] = { BaseTweenInfo, { BackgroundTransparency = 0 } };
			[self.SideDivider] = { BaseTweenInfo, { BackgroundTransparency = 0 } };
			[self.Divider] = { BaseTweenInfo, { BackgroundTransparency = 0 } };
			[self.SideContainer] = { BaseTweenInfo, { Size = UDim2.new(1,0,0.894,-8) } };
			[self.Label] = {BaseTweenInfo, { TextTransparency = 0 }};
			[self.Icon] = {BaseTweenInfo, { ImageTransparency = 0 }};
			[self.Side] = {BaseTweenInfo, { BackgroundTransparency = 0 }};
			[self.Stroke] = {BaseTweenInfo, { Transparency = 0.8 }};
		})
	}
	self.UiContainer.MouseEnter:Connect(function()
		if not self.IsVisible then return end
		for _, Tween in next, Tweens.Hover do
			Tween:Play()
		end
	end)
	self.UiContainer.MouseLeave:Connect(function()
		if not self.IsVisible then return end
		for _, Tween in next, Tweens.Normal do
			Tween:Play()
		end
	end)

	for _, Tween in next, Tweens.Normal do
		Tween:Play()
	end
	
	local ToggleKey = Data.ToggleKey or Enum.KeyCode.P
	self.IsVisible = true
	UserInputService.InputBegan:Connect(function(Object: InputObject)
		local Key = Object.KeyCode

		if Key == ToggleKey then
			self.IsVisible = not self.IsVisible
			task.delay(self.IsVisible and 0 or BaseTweenInfo.Time, function()
				self.AlaskaUI.Enabled = self.IsVisible
			end)
			self.Tabs.ActiveTab:SetVisible(self.IsVisible)
			for _, Tween in next, (self.IsVisible and Tweens.ShowUI) or Tweens.HideUI do
				Tween:Play()
			end
		end
	end)


	return self
end

return Library
